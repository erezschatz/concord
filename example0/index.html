<!DOCTYPE html>
<html>
	<head>
        <meta charset="utf-8"/>
		<title>Dentro</title> 
		<script src="../libraries/jquery-1.9.1.min.js"></script>  
		<link href="../libraries/bootstrap.css" rel="stylesheet">
		<script src="../libraries/bootstrap.min.js"></script>
		<link rel="stylesheet" href="../concord.css"/>
		<script src="../concord.js"></script>
		<script src="../concordUtils.js"></script>
		<link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
		<style>
			body {
				background-color: whitesmoke;
				}
			.divOutlinerContainer { 
				width: 50%;
				margin-top: 75px;
				margin-left: auto;
				margin-right: auto;
				border:1px solid gainsboro;
				min-height: 300px;
				max-height: 500px;
				overflow: auto; 
				padding: 6px;
				background-color: white;
				}
			</style>
		</head>
	<body>
		<div class="divOutlinerContainer">
			<div id="outliner">
				</div>
			</div>
            <input type="button" id="labutton" value="PERSS"></input>
            <input type="file" id="files" name="files[]" />
		<script>
			$(document).ready (function () {
				$("#outliner").concord ({
					"prefs": {
						"outlineFontSize": 18, 
						"outlineLineHeight": 24,
						"renderMode": false,
						"readonly": false,
						"typeIcons": appTypeIcons
						},
					});
				opXmlToOutline (initialOpmltext);
				});

                $("#labutton").click(function() {
                var content = opOutlineToXml("Erez Schatz", "erez.schatz@gmail.com", "erez");
    var contentType = 'text/x-opml+xml';
        var a = document.createElement('a');
        var blob = new Blob([content], {'type':contentType});
        a.href = window.URL.createObjectURL(blob);
        a.download = "denrto.opml";
        a.click();
                });
function handleFileSelect(evt) {
    let f = evt.target.files[0];
		if (!f.name.match(/\.opml$/)) return;
				
				var reader = new FileReader();
				
				reader.onload = (e => {
				    opXmlToOutline(e.target.result);
				});
				
				reader.readAsText(f);
}

document.getElementById('files').addEventListener('change', handleFileSelect, false)
			</script>
		</body>
	</html>
